<div class="box">
	<div class="tt-v1 pt-3 mb-3">
		<h4 class="text-uppercase">Thông tin tài khoản</h4>
	</div>
	<form [formGroup]="formData" class="form-row align-items-center" autocomplete="off">
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Họ và Tên <span class="cl-red">(*)</span></label>
			<input [svTrim] maxlength="50" [(ngModel)]="model.fullName" formControlName="fullName" type="text" placeholder="Nhập..." class="form-control border-brown">
			<div *ngIf="(submitted && f.fullName.invalid)||(f.fullName.invalid && (f.fullName.dirty || f.fullName.touched))" class="has-error m-b-12">
				<div *ngIf="f.fullName.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Ngày tháng năm sinh <span class="cl-red">(*)</span></label>
			<div class="input-group">
				<input class="form-control" placeholder="Nhập..." bsDatepicker #n="bsDatepicker" maxlength="10" id="_dateOfBirth" [(ngModel)]="model.dateOfBirth"
				formControlName="dateOfBirth" appBsDatepickerInvalid
				[bsConfig]="{dateInputFormat: 'DD/MM/YYYY', containerClass: 'theme-dark-blue', adaptivePosition: true,language:'vi'}" />
				<div class="input-group-addon p-2 center border-right">
					<i class="bi bi-calendar-date" (click)="n.toggle()" [attr.aria-expanded]="n.isOpen"></i>
				</div>
			</div>
			<div *ngIf="(submitted && f.dateOfBirth.invalid)||(f.dateOfBirth.invalid && (f.dateOfBirth.dirty || f.dateOfBirth.touched))" class="has-error m-b-12">
				<div *ngIf="f.dateOfBirth.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Email</label>
			<input [svTrim] maxlength="50" [(ngModel)]="model.email" formControlName="email" type="text" placeholder="Nhập..." class="form-control border-brown">
			<div *ngIf="(submitted && f.email.invalid)||(f.email.invalid && (f.email.dirty || f.email.touched))" class="has-error m-b-12">
				<div *ngIf="f.email.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
				<div *ngIf="f.email.errors.email">
					<span class="help-block">Email không hợp lệ</span>
				</div>
			</div>
		</div>
		<!-- row2 -->
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Quốc tịch <span class="cl-red">(*)</span></label>
			<ng-select notFoundText="Không có dữ liệu"  *ngIf="!nation_enable_type" [(ngModel)]="model.nation" formControlName="nation" class="form-control" placeholder="Chọn..." [closeOnSelect]="true"
				(change)="onChangeNation(true)">
				<ng-option *ngFor="let nation of listNation" [value]="nation.id">{{nation.name}}</ng-option>
			</ng-select>
			<input [svTrim] *ngIf="nation_enable_type" [(ngModel)]="model.nation" formControlName="nation" type="text" placeholder="Nhập..." class="form-control border-brown"
				(click)="resetNationField()">
			<span *ngIf="nation_enable_type" class="select-caret-icon" (click)="backToVal()">
				<i class="bi bi-caret-down-fill"></i>
			</span>
			<div *ngIf="(submitted && f.nation.invalid)||(f.nation.invalid && (f.nation.dirty || f.nation.touched))" class="has-error m-b-12">
				<div *ngIf="f.nation.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Tỉnh / Thành phố <span class="cl-red">(*)</span> </label>
			<select *ngIf="nation_enable_type" disabled [(ngModel)]="model.provinceId" formControlName="provinceId" class="form-control" placeholder="Chọn...">
				<option value="0">Chọn...</option>
			</select>
			<ng-select notFoundText="Không có dữ liệu"  *ngIf="!nation_enable_type" [(ngModel)]="model.provinceId" formControlName="provinceId" class="form-control" placeholder="Chọn..." [closeOnSelect]="true"
				(change)="onChangeProvince(true)">
				<ng-option *ngFor="let prov of listProvince" [value]="prov.id">{{prov.name}}</ng-option>
			</ng-select>
			<div *ngIf="(submitted && !nation_enable_type && !model.provinceId)" class="has-error m-b-12">
				<div>
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Huyện / Quận / Thị xã... <span class="cl-red">(*)</span></label>
			<select *ngIf="nation_enable_type" disabled [(ngModel)]="model.districtId" formControlName="districtId" class="form-control" placeholder="Chọn...">
				<option value="0">Chọn...</option>
			</select>
			<ng-select notFoundText="Không có dữ liệu"  *ngIf="!nation_enable_type" [(ngModel)]="model.districtId" formControlName="districtId" class="form-control" placeholder="Chọn..." [closeOnSelect]="true"
				(change)="onChangeDistrict(true)">
				<ng-option *ngFor="let dis of listDistrict" [value]="dis.id">{{dis.name}}</ng-option>
			</ng-select>

			<div *ngIf="(submitted && !nation_enable_type && !model.districtId)">
				<div class="has-error m-b-12">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<!-- row 3 -->
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Xã / Phường / Thị trấn <span class="cl-red">(*)</span></label>
			<select *ngIf="nation_enable_type" disabled [(ngModel)]="model.wardsId" formControlName="wardsId" class="form-control" placeholder="Chọn...">
				<option value="0">Chọn...</option>
			</select>
			<ng-select notFoundText="Không có dữ liệu"  *ngIf="!nation_enable_type" [(ngModel)]="model.wardsId" formControlName="wardsId" class="form-control" placeholder="Chọn..." [closeOnSelect]="true">

				<ng-option *ngFor="let vill of listVillage" [value]="vill.id">{{vill.name}}</ng-option>
			</ng-select>
			<div *ngIf="(submitted && !nation_enable_type && !model.wardsId)">
				<div class="has-error m-b-12">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-8 form-group">
			<label class="mb-1">Địa chỉ cụ thể <span class="cl-red">(*)</span></label>
			<input [svTrim] maxlength="200" [(ngModel)]="model.address" formControlName="address" type="text" placeholder="Nhập..." class="form-control border-brown">

			<div *ngIf="(submitted && f.address.invalid)||(f.address.invalid && (f.address.dirty || f.address.touched))" class="has-error m-b-12">
				<div *ngIf="f.address.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<!-- row 4 -->
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Số CMND / CCCD / Hộ chiếu <span class="cl-red">(*)</span></label>
			<input [svTrim] maxlength="12" [(ngModel)]="model.idCard" formControlName="idCard" type="text" placeholder="Nhập..." class="form-control border-brown"
				pattern="^(\w{7}|\w{8}|\w{9}|\w{12})$">
			<div *ngIf="(submitted && f.idCard.invalid)||(f.idCard.invalid && (f.idCard.dirty || f.idCard.touched))" class="has-error m-b-12">
				<div *ngIf="f.idCard.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
				<div *ngIf="f.idCard.errors.pattern">
					<span class="help-block">Số CMND/CCCD không hợp lệ!</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Nơi cấp</label>
			<input [svTrim] maxlength="200" [(ngModel)]="model.issuedPlace" formControlName="issuedPlace" type="text" placeholder="Nhập..." class="form-control border-brown">

			<div *ngIf="(submitted && f.issuedPlace.invalid)||(f.issuedPlace.invalid && (f.issuedPlace.dirty || f.issuedPlace.touched))" class="has-error m-b-12">
				<div *ngIf="f.issuedPlace.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 form-group">
			<label class="mb-1">Ngày cấp</label>
			<div class="input-group">
				<input class="form-control" placeholder="Nhập..." bsDatepicker #n="bsDatepicker" maxlength="10" id="_issuedDate" 
					[(ngModel)]="model.issuedDate"
				formControlName="issuedDate" appBsDatepickerInvalid [bsConfig]="{dateInputFormat: 'DD/MM/YYYY', containerClass: 'theme-dark-blue', adaptivePosition: true}" />
				<div class="input-group-addon p-2 center border-right">
					<i class="bi bi-calendar-date" (click)="n.toggle()" [attr.aria-expanded]="n.isOpen"></i>
				</div>
			</div>
		
			<div *ngIf="(submitted && f.issuedDate.invalid)||(f.issuedDate.invalid && (f.issuedDate.dirty || f.issuedDate.touched))" class="has-error m-b-12">
				<div *ngIf="f.issuedDate.errors.required">
					<span class="help-block">Trường dữ liệu này không được để trống</span>
				</div>
			</div>
		</div>
		
		<div class="col-12 col-lg-8 form-group">
			<label class="mr-3">Giới tính:</label>
			<label *ngFor="let gen of listGender" class="radio-inline mr-3">
				<input [(ngModel)]="model.gender" formControlName="gender" [value]="gen.value" type="radio"> <span class="text-uppercase"> {{gen.text}}</span>
			</label>
		</div>
	</form>

	<div class="row mb-4">
		<div class="col text-right clearfix">
			<button type="button" class="btn text-white border-0 rounded-xl mt-3 grd-xanhngoc pull-right" (click)="onSave()">Cập nhật</button>
			<button type="button" class="btn grd-brown text-dark border-0 rounded-xl mt-3 mr-3 pull-right" (click)="onReSet()">Đặt lại</button>
		</div>
	</div>
</div>
