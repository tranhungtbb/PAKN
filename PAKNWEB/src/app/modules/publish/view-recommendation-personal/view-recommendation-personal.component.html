<!--**********************************
            Content body start
        ***********************************-->
<div class="content-nd">
	<div class="container">
		<div class="row justify-content-between pt-5">
			<div class="col-lg-8 col-md-8">
				<ol class="breadcrumb px-0 bg-transparent">
					<li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
					<li class="breadcrumb-item active"><a href="#" class="font-weight-bold">Phản ánh, Kiến nghị</a></li>
				</ol>
				<div class="box">
					<p class="card-text h3 mb-3"><span style="font-weight: 300;">Kiến nghị về việc: </span>
						{{model.title}}
					</p>
					<div class="py-2 mb-4 d-flex justify-content-between align-items-center border-bottom border-top">
						<div class="media align-items-center">
							<div class="avatar-circle mr-2" style="background: #EBF2FF; color: #5D90F1">
								{{model.shortName}}
							</div>
							<div class="media-body">
								<p class="my-0 h5">{{model.name}}</p>
							</div>

						</div>
						<span>{{model.createdDate | date:'HH:mm dd/MM/yyyy'}}</span>
					</div>
					<div class="m-3">
						<span class="pr-5">
							<span class="my-0 h5">Đơn vị tiếp nhận :</span> {{model.unitName}}
						</span>
						<span *ngIf="model.fieldName">
							<span class="my-0 h5">Lĩnh vực :</span> {{model.fieldName}}
						</span>
					</div>

					<div class="media pb-4 mb-4 box-message-publish">
						<div class="mr-3">
							<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="currentColor"
								class="bi bi-chat-right-text" viewBox="0 0 16 16">
								<path
									d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z">
								</path>
								<path
									d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z">
								</path>
							</svg>
						</div>
						<div class="media-body">
							<p class="h4 font-italic font-weight-bold">Nội dung phản ánh kiến nghị:</p>
							<p style="text-align: justify;">{{model.content}}</p>

							<span class="text-left">
								<small class="small" *ngIf="filesModel && filesModel.length > 0">Tài liệu đính kèm</small><br>
								<div *ngFor="let file of filesModel" class="file-att">
									<a *ngIf="file.fileType == 1" download href="javascript:void(0)" (click)="DownloadFile(file)"
										style="color: #333;">
										<img src="../../../../assets/dist/images/file-word.svg" style="width: 30px;padding-right: 5px;"
											alt="">
										<span class="small text-truncate">{{file.name.length > 15? file.name.slice(0,14) + "..." :
											file.name}}</span>
									</a>
									<a *ngIf="file.fileType == 2" download href="javascript:void(0)" (click)="DownloadFile(file)"
										style="color: #333;">
										<img src="../../../../assets/dist/images/file-excel.svg" style="width: 30px;padding-right: 5px;"
											alt="">
										<span class="small text-truncate">{{file.name.length > 15? file.name.slice(0,14) + "..." :
											file.name}}</span>
									</a>
									<a *ngIf="file.fileType == 3" download href="javascript:void(0)" (click)="DownloadFile(file)"
										style="color: #333;">
										<img src="../../../../assets/dist/images/file-pdf.svg" style="width: 30px;padding-right: 5px;"
											alt="">
										<span class="small text-truncate">{{file.name.length > 15? file.name.slice(0,14) + "..." :
											file.name}}</span>
									</a>
									<a *ngIf="file.fileType == 4" download href="javascript:void(0)" (click)="DownloadFile(file)"
										style="color: #333;">
										<img src="../../../../assets/dist/images/file-image.svg" style="width: 30px;padding-right: 5px;"
											alt="">
										<span class="small text-truncate">{{file.name.length > 15? file.name.slice(0,14) + "..." :
											file.name}}</span>
									</a>
									<a *ngIf="file.fileType == 6" download href="javascript:void(0)" (click)="DownloadFile(file)"
										style="color: #333;">
										<img src="../../../../assets/dist/images/file-powerpoint.svg"
											style="width: 30px;padding-right: 5px;" alt="">
										<span class="small text-truncate">{{file.name.length > 15? file.name.slice(0,14) + "..." :
											file.name}}</span>
									</a>
									<a *ngIf="file.fileType == 7" download href="javascript:void(0)" (click)="DownloadFile(file)"
										style="color: #333;">
										<img src="../../../../assets/dist/images/mp4-svgrepo-com.svg"
											style="width: 30px;padding-right: 5px;" alt="">
										<span class="small text-truncate">{{file.name.length > 15? file.name.slice(0,14) + "..." :
											file.name}}</span>
									</a>
									<span *ngIf="file.fileType != 6 && file.fileType != 5" class="pointer" appViewFile
										[linkfile]="file.filePath" [namefile]="file.name" title="Xem file">
										<i class="bi bi-eye"></i>
									</span>
								</div>
							</span>
						</div>
					</div>
					<div class="media pb-4 mb-4 box-message-publish" *ngIf="[3,6,10].includes(model.status)">
						<div class="mr-3">
							<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="currentColor"
								class="bi bi-chat-left-text-fill" style="color: #88C88B;" viewBox="0 0 16 16"
								[style.color]="{'red':[3,6,9].includes(model.status)}" *ngIf="[10].includes(model.status)">
								<path
									d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z" />
							</svg>
							<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="currentColor"
								class="bi bi-chat-left-text-fill" style="color: red" viewBox="0 0 16 16"
								*ngIf="[3,6].includes(model.status)">
								<path
									d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z" />
							</svg>
						</div>
						<div class="media-body">
							<div class="tt-v1 d-flex justify-content-between">
								<p *ngIf="!model.processUnitName" class="h4 font-italic font-weight-bold">{{model.unitName}} trả lời:
								</p>
								<p *ngIf="model.processUnitName" class="h4 font-italic font-weight-bold">{{model.processUnitName}} trả
									lời:</p>
								<p *ngIf="[10].includes(model.status)" class="mb-0">{{model.approvedDate | date : 'dd/MM/yyyy'}}</p>
								<p *ngIf="[3].includes(model.status)" class="mb-0">{{model.denyDate | date : 'dd/MM/yyyy'}}</p>
							</div>

							<ng-container *ngIf="[3,6].includes(model.status)">
								<p style="text-align: justify;">{{model.reasonDeny}}</p>
							</ng-container>
							<ng-container *ngIf="model.status > 5">
								<p style="text-align: justify;">{{modelConclusion.content}}</p>
								<ng-container *ngFor="let item of filesModel">
									<div class="col-auto mb-4" *ngIf="item.fileType == 1">
										<div class="alert alert-dark alert-dismissible fade show h-100 d-flex align-items-center"
											style="width: 170px">
											<button type="button" class="close" (click)="onRemoveFile(item)"><span><i
														class="mdi mdi-close"></i></span>
											</button>
											<a href="#" class="d-block text-center box-fileinput">
												<img src="../../../../assets/dist/images/file-word.svg" style="width: 45px" alt="">
												<span class="mt-3 text-dark text-wrap text-2line">{{item.name}}</span>
											</a>
										</div>
									</div>
									<div class="col-auto mb-4" *ngIf="item.fileType == 2">
										<div class="alert alert-dark alert-dismissible fade show h-100 d-flex align-items-center"
											style="width: 170px">
											<button type="button" class="close" (click)="onRemoveFile(item)"><span><i
														class="mdi mdi-close"></i></span>
											</button>
											<a href="#" class="d-block text-center box-fileinput">
												<img src="../../../../assets/dist/images/file-excel.svg" style="width: 45px" alt="">
												<span class="mt-3 text-dark text-wrap text-2line">{{item.name}}</span>
											</a>
										</div>
									</div>
									<div class="col-auto mb-4" *ngIf="item.fileType == 4">
										<div class="alert alert-dark alert-dismissible fade show h-100 d-flex align-items-center"
											style="width: 170px">
											<button type="button" class="close" (click)="onRemoveFile(item)"><span><i
														class="mdi mdi-close"></i></span>
											</button>
											<a href="#" class="d-block text-center box-fileinput">
												<img src="../../../../assets/dist/images/file-image.svg" style="width: 45px" alt="">
												<span class="mt-3 text-dark text-wrap text-2line">{{item.name}}</span>
											</a>
										</div>
									</div>
									<div class="col-auto mb-4" *ngIf="item.fileType == 3">
										<div class="alert alert-dark alert-dismissible fade show h-100 d-flex align-items-center"
											style="width: 170px">
											<button type="button" class="close" (click)="onRemoveFile(item)"><span><i
														class="mdi mdi-close"></i></span>
											</button>
											<a href="#" class="d-block text-center box-fileinput">
												<img src="../../../../assets/dist/images/file-pdf.svg" style="width: 40px" alt="">
												<span class="mt-3 text-dark text-wrap text-2line">{{item.name}}</span>
											</a>
										</div>
									</div>
									<div class="col-auto mb-4" *ngIf="item.fileType == 6">
										<div class="alert alert-dark alert-dismissible fade show h-100 d-flex align-items-center"
											style="width: 170px">
											<button type="button" class="close" (click)="onRemoveFile(item)"><span><i
														class="mdi mdi-close"></i></span>
											</button>
											<a href="#" class="d-block text-center box-fileinput">
												<img src="../../../../assets/dist/images/file-powerpoint.svg" style="width: 45px" alt="">
												<span class="mt-3 text-dark text-wrap text-2line">{{item.name}}</span>
											</a>
										</div>
									</div>

								</ng-container>
							</ng-container>
						</div>
					</div>
				</div>
				<div class="box mb-4" *ngIf="model.status > 4 && !(model.status == 5 && model.isForwardProcess)">
					<h3 class="mb-3 text-uppercase">
						Trao đổi với cơ quan xử lý PAKN <span>({{totalInfomationExchange}})</span>
					</h3>
					<div class="py-3 px-4 rounded-xl mb-4 border" style="background: #FEFEFE">
						<div class="form-group mb-0">
							<textarea class="form-control px-4 py-3" [(ngModel)]="infoExchangeModel.contents" rows="3"
								placeholder="Nhập bình luận..." id="comment" maxlength="500"></textarea>
							<button type="button" class="btn text-white no-grd-blue border-0 px-5 mt-3"
								(click)="onInsertInfomationExchange()">Gửi</button>
						</div>
					</div>
					<ng-container *ngFor="let item of listInfomationExchange; let i = index">
						<div class="media mt-3 border-top pt-3">
							<div class="avatar-circle mr-2" style="background: #eae5ff; color: #4527a0">
								{{getShortName(item.fullName)}}
							</div>
							<div class="media-body">
								<p class="mb-0 h5">{{item.fullName}}</p>
								<div class="d-flex">
									<p class="small mb-1">{{item.createdDate | date:'HH:mm - dd/MM/yyyy'}}</p>
								</div>
								<p class="mb-0">
									{{item.contents}}
								</p>
							</div>
						</div>
					</ng-container>

					<p class="border-top pt-3 mt-3" *ngIf="IsAllComment == false">
						<a href="javascript:void(0)" (click)="loadComment()">Xem thêm 20 trao đổi khác
							<span class="ml-2">
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
									class="bi bi-arrow-right" viewBox="0 0 16 16">
									<path fill-rule="evenodd"
										d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" />
								</svg>
							</span>
						</a>
					</p>
				</div>
			</div>

			<div class="col-md-4 col-lg-4 d-lg-block sidebar-ct pl-3 pl-lg-0">
				<app-statistics-right [isShowSatisfationChart]="true"></app-statistics-right>
				<app-gallery></app-gallery>
			</div>
		</div>
	</div>
</div>
<!--**********************************
									Content body end
							***********************************-->