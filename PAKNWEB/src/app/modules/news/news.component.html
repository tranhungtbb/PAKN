<div class="content-body">
	<!-- row -->
	<div class="container-fluid p-0">
		<div class="row">
			<div class="col-lg-12">
				<div class="breadcrumb title-module px-0 bg-transparent" style="text-transform: uppercase; font-size: 18px;font-weight: 600;">Danh sách tin tức</div>
				<div class="btn-group group-button-table" role="group">
					<button type="button" class="btn grd-brown3 btn-sm rounded border-0 mr-3 text-dark">
						<i class="pi pi-file-excel"></i>
						Xuất excel
					</button>
					<a [routerLink]="['./them-moi']" class="btn grd-xanhngoc btn-sm rounded border-0 text-white">
						<i class="bi bi-plus"></i>&nbsp;
						Thêm mới
					</a>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div class="card mb-0 shadow-none">
					<div class="table-responsive">
						<p-table #table [value]="listDataPaged" [rows]="query.pageSize" [totalRecords]="totalCount" currentPageReportTemplate="Tổng số {{totalCount}}"
							(onLazyLoad)="onPageChange($event)" [lazy]="true" [responsive]="true" [paginator]="true" [showCurrentPageReport]="true" autoLayout="true"
							tableStyleClass="table table-sd table-responsive-md table-striped mb-0">
							<ng-template pTemplate="header" class="bg-thead">
								<tr>
									<th>
										<p class="mb-1 d-flex justify-content-between align-items-center label-thead">
											<strong>Bài viết</strong>
											<span class="caret-tb"></span>
										</p>
										<input [(ngModel)]="query.title" (change)="filterChange()" type="text" class="form-control form-control-sm">
									</th>
									<th>
										<p class="mb-1 d-flex justify-content-between align-items-center label-thead">
											<strong>Loại tin tức</strong>
											<span class="caret-tb"></span>
										</p>
										<div class="dropdown bootstrap-select form-control form-control-sm">
											<ng-select class="" placeholder="Loại tin tức ..." [items]="listNewCategories" bindLabel="name" bindValue="id" [closeOnSelect]="true"
												[(ngModel)]="query.newsType" (change)="filterChange()">
											</ng-select>
										</div>

									</th>
									<th style="width: 160px">
										<p class="mb-1 d-flex justify-content-between align-items-center label-thead">
											<strong>Trạng thái</strong>
											<span class="caret-tb"></span>
										</p>
										<div class="dropdown bootstrap-select form-control form-control-sm">
											<ng-select class="" placeholder="Trạng thái ..." [items]="listStatus" bindLabel="text" bindValue="value" [closeOnSelect]="true"
												[(ngModel)]="query.status" (change)="filterChange()">
											</ng-select>
										</div>

									</th>
									<th class="text-right"><strong>Thao tác</strong></th>
								</tr>
							</ng-template>
							<ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
								<tr>
									<td>
										<img width='60px' [src]="item.imageBin">
										<strong>
											&nbsp;{{item.title}}
										</strong>
									</td>
									<td>
										{{listNewCategories | getCateName:item.newsType}}
									</td>
									<td>
										<span *ngIf="item.status == listStatus[2].value" class="badge rounded-pill badge-outline-light bg-white">{{listStatus[2].text}}</span>
										<span *ngIf="item.status == listStatus[0].value" class="badge rounded-pill bg-green">{{listStatus[0].text}}</span>
										<span *ngIf="item.status == listStatus[1].value" class="badge rounded-pill bg-blue2">{{listStatus[1].text}}</span>
									</td>
									<td>
										<div class="d-flex justify-content-end">
											<button class="btn-icon grd-xanhngoc text-white mr-2 border-0" (click)="onOpenModalConfirm(item.id,'publish')">
												<i class="bi bi-box-arrow-up" *ngIf="item.isPublished" title="Đã công bố"></i>
												<i class="bi bi-box-arrow-down" *ngIf="!item.isPublished" title="Đã thu hồi"></i>
											</button>
											<a [routerLink]="['./chinh-sua', item.id]" class="btn-icon mr-2 border-0" title="Sửa"><i class="bi bi-pencil-square"></i></a>
											<button class="btn-icon grd-red text-white border-0" data-toggle="modal" data-target="#modal-history-pakn"
												(click)="onOpenModalConfirm(item.id,'delete')"><i class="bi bi-trash" title="Xóa"></i></button>
										</div>
									</td>
								</tr>
							</ng-template>
						</p-table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- confirm modal -->
<div class="modal fade" id="modal-confirm">
	<div class="modal-dialog modal-dialog-centered modal-md" role="document">
		<div class="modal-content rounded">
			<div class="modal-header border-bottom-0">
				<p class="modal-title h3">Xác nhận</p>
				<button type="button" class="close" data-dismiss="modal"><span>&times;</span>
				</button>
			</div>
			<div class="modal-body pb-0">
				<span>
					{{modalConfirm_message}}
				</span>
			</div>
			<div class="modal-footer border-top-0">
				<button type="button" class="btn btn-outline-secondary border px-5" data-dismiss="modal">Hủy</button>
				<button type="button" class="btn btn-danger border-0 px-5 grd-blue" data-dismiss="modal" (click)="acceptConfirm()">Đồng ý</button>
			</div>
		</div>
	</div>
</div>
