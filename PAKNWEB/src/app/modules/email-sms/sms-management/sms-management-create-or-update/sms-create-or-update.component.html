<div class="content-body">
	<div class="container-fluid p-0">
		<div class="row">
			<div class="col-lg-12">
				<ol class="breadcrumb title-module px-0 bg-transparent mb-0">
					<li class="breadcrumb-item active"><a class="font-weight-bold text-uppercase">{{title}}</a></li>
				</ol>
				<div class="btn-group group-button-table" role="group">
					<a class="btn btn-sm rounded bg-white text-dark border mr-3" (click)="redirectList()">
						<i class="bi bi-arrow-left"></i>&nbsp;
						Quay lại
					</a>
					<span *ngIf="model.id ==0">
						<button class="btn btn-sm grd-xanhngoc text-white rounded border-0 mr-3 px-4"
							*hasPermission="['3', 'B_II_8']" (click)="onSave(false)">{{action}}</button>
					</span>
					<span *ngIf="model.id !=0">
						<button class="btn btn-sm grd-xanhngoc text-white rounded border-0 mr-3 px-4"
							*hasPermission="['3', 'B_II_7']" (click)="onSave(false)">{{action}}</button>
					</span>
					<button class="btn btn-sm grd-blue text-white rounded border-0 mr-3 px-4" *hasPermission="['3', 'B_II_0']"
						(click)="onSave(true)">Gửi</button>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-6" style="padding: 20px 20px 0px 40px; border-right: 1px solid #e5e5e5;">
				<form class="form-horizontal" [formGroup]="form">
					<div class="row form-group">
						<div class="col-sm-12 padding-col">
							<label class="control-label department">Tiêu đề<span class="text-danger">(*)</span></label>
							<input class="form-control" autofocus formControlName="title" [(ngModel)]="model.title" maxlength="50"
								placeholder="Nhập..." />
							<div *ngIf="(submitted && f.title.invalid) || (f.title.invalid && (f.title.dirty || f.title.touched))"
								class="has-error m-b-12">
								<div *ngIf="f.title.errors.required">
									<span class="help-block">Trường dữ liệu này không để trống</span>
								</div>
							</div>
						</div>

						<div class="col-sm-12 padding-col">
							<label class="control-label department">Nội dung<span class="text-danger">(*)</span></label>
							<textarea class="form-control" [(ngModel)]="model.content" formControlName="content" maxlength="500"
								rows="7" placeholder="Nhập..."></textarea>
							<div
								*ngIf="(submitted && f.content.invalid) || (f.content.invalid && (f.content.dirty || f.content.touched))"
								class="has-error m-b-12">
								<div *ngIf="f.content.errors">
									<span class="help-block">Trường dữ liệu này không để trống</span>
								</div>
							</div>
						</div>

						<div class="col-sm-12 padding-col">
							<label class="control-label department">Chữ ký<span class="text-danger">(*)</span></label>
							<input class="form-control" [(ngModel)]="model.signature" formControlName="signature"
								placeholder="Nhập..." />
							<div
								*ngIf="(submitted && f.signature.invalid) || (f.signature.invalid && (f.signature.dirty || f.signature.touched))"
								class="has-error m-b-12">
								<div *ngIf="f.signature.errors">
									<span class="help-block">Trường dữ liệu này không để trống</span>
								</div>
							</div>
						</div>
						<!-- tài liệu đính kèm -->

					</div>
				</form>
			</div>
			<div class="col-md-6">
				<form class="form-horizontal" [formGroup]="form">
					<div class="row form-group pr-2">
						<div class="col-sm-12 pl-2 pr-2">
							<div class="title-user-map">Cá nhân doanh nghiệp nhận SMS</div>
							<div class="search-user" *ngIf="statusCurent != 2">
								<div>
									<mat-checkbox [(ngModel)]="individual" class="mr-2" (click)="onLoadListIndividualAndBusiness()"
										[ngModelOptions]="{standalone: true}" [labelPosition]="before" class="permision-category"
										[color]="primary">Cá nhân
									</mat-checkbox>
									<mat-checkbox [(ngModel)]="business" (click)="onLoadListIndividualAndBusiness()"
										[ngModelOptions]="{standalone: true}" [labelPosition]="before" class="permision-category"
										[color]="primary">Doanh nghiệp
									</mat-checkbox>
								</div>
								<div class="d-flex">
									<p-multiSelect [options]="listData" class="form-control" formControlName="userId" [(ngModel)]="userId"
										optionLabel="name" [virtualScroll]="true" optionValue="id">
										<ng-template let-userSelected pTemplate="selectedItems">
											<ng-container *ngIf="userSelected && userSelected.length < 2">
												<div *ngFor="let val of userSelected" class="ui-multiselected-item-token ui-corner-all">
													<span>{{val.name}}</span>
												</div>
											</ng-container>

											<span *ngIf="!userSelected || userSelected.length === 0"
												class="ui-multiselected-empty-token  ui-corner-all">Chọn cá nhân, doanh
												nghiệp...</span>
											<span *ngIf="userSelected && userSelected.length > 1"
												class="ui-multiselected-empty-token ui-corner-all">{{userSelected.length}}
												cá nhân, doanh nghiệp đã chọn</span>
										</ng-template>
									</p-multiSelect>
									<button type="button" class="btn btn-sm grd-xanhngoc text-white rounded border-0 ml-3 px-4"
										(click)="onCreateUser()">
										Thêm
									</button>
								</div>


							</div>
						</div>

						<div class="list-user">
							<div class="title-user-map center" style="text-transform: none;" *ngIf="listItemUserSelected.length ==0">
								Chưa có cá nhân, doanh nghiệp</div>
							<div class="col-sm-12 item-user" *ngFor="let item of listItemUserSelected">
								<div class="info-user border-right padding-item" style="padding-left: 0px;">
									<div class="title" *ngIf="item.category ==1">Cá nhân</div>
									<div class="title" *ngIf="item.category ==2">Doanh nghiệp</div>
									<div class="department">{{item.name}}</div>
								</div>
								<div class="info-unit border-right padding-item" style="width: 60%">
									<div class="title">Địa chỉ</div>
									<div class="department">{{item.address}}</div>
								</div>
								<div class="action padding-item center" *ngIf="statusCurent != 2">
									<button type="button" (click)="onRemoveUser(item)"
										style="width: 40px; height: 40px;background: #E0E7FA; color: black;"
										class="btn btn-block border-0 px-3 center">
										<i class="bi bi-dash"></i>
									</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>