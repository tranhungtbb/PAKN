<div class="content-body">
	<div class="container-fluid p-0">
		<div class="row">
			<div class="col-lg-12">
				<ol class="breadcrumb title-module px-0 bg-transparent mb-0">
					<li class="breadcrumb-item"><a class="font-weight-bold uppercase">Thống kê theo phân loại Phản ánh kiến
							nghị</a></li>
				</ol>
				<div class="btn-group group-button-table" role="group">
					<button type="button" class="btn background-while btn-sm rounded border-0 mr-3 text-dark" (click)="onExport()"
						*hasPermission="['3', 'D_II_2']">

						Xuất báo cáo
					</button>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<div class="card mb-0 shadow-none">
					<div class="row p-3" style="background-color: #f6f6f6;">

						<div class="col col-sm-2 form-group mb-0">
							<div class="dropdown bootstrap-select form-control form-control-sm">
								<ng-select notFoundText="Không có dữ liệu" [clearable]="false" placeholder="Chọn" class="form-control"
									[items]="listType" bindLabel="text" bindValue="value" [(ngModel)]="type" [closeOnSelect]="true"
									(change)="getList()">
								</ng-select>
							</div>
						</div>
						<div class="col col-sm-2 form-group mb-0">
							<div class="dropdown bootstrap-select form-control form-control-sm">
								<ng-select notFoundText="Không có dữ liệu" [clearable]="false" placeholder="Năm" class="form-control"
									[items]="listYear" bindLabel="text" bindValue="value" [(ngModel)]="year" [closeOnSelect]="true"
									(change)="changeYear()">
								</ng-select>
							</div>
						</div>
						<div class="col col-sm-2 form-group mb-0">
							<div class="dropdown bootstrap-select form-control form-control-sm">
								<ng-select notFoundText="Không có dữ liệu" class="form-control" placeholder="Quý" [clearable]="true"
									[items]="listQuarter" bindLabel="text" bindValue="value" [(ngModel)]="quarter" [closeOnSelect]="true"
									(change)="changeQuarter()">
								</ng-select>
							</div>
						</div>
						<div class="col col-sm-2 form-group mb-0">
							<input id="from_date" class="form-control-sm form-control" type="text" bsDatepicker #nv="bsDatepicker"
								[(ngModel)]="fromDate" [maxDate]="maxDateValue" [bsConfig]="{
									adaptivePosition: true,
									dateInputFormat: 'DD/MM/YYYY',
									containerClass: 'theme-dark-blue'
								}" datetime="DD/MM/YYYY" placeholder="Từ ngày" (bsValueChange)="fromDateValueChange($event)" />
							<span class="input-group-addon" (click)="nv.toggle()" [attr.aria-expanded]="nv.isOpen">
								<i class="fal fa-calendar"></i>
							</span>
						</div>
						<div class="col col-sm-2 form-group mb-0">
							<input id="to_date" class="form-control-sm form-control" type="text" bsDatepicker #nvto="bsDatepicker"
								[(ngModel)]="toDate" [maxDate]="maxDateValue" [bsConfig]="{
									adaptivePosition: true,
									dateInputFormat: 'DD/MM/YYYY',
									containerClass: 'theme-dark-blue'
								}" datetime="DD/MM/YYYY" placeholder="Đến ngày" (bsValueChange)="toDateValueChange($event)" />
							<span class="input-group-addon" (click)="nvto.toggle()" [attr.aria-expanded]="nvto.isOpen">
								<i class="fal fa-calendar"></i>
							</span>
						</div>
					</div>
					<div class="table-responsive">
						<p-table #table [value]="listData" [paginator]="true" [rows]="20" sortMode="multiple"
							[showCurrentPageReport]="true" [rowsPerPageOptions]="[20,30,50]" [rows]="pageSize"
							currentPageReportTemplate="Tổng số {{totalRecords}}" [totalRecords]="totalRecords"
							(onLazyLoad)="onPageChange($event)" [responsive]="true" autoLayout="true"
							tableStyleClass="table table-sd table-responsive-md table-striped mb-0" [lazy]="true">
							<ng-template pTemplate="header">
								<tr>
									<th rowspan="6" class="text-center middle" style="width: 50px;">STT</th>
									<th rowspan="6" colspan="1" class="text-center middle text-uppercase">{{ type == 1 ? 'Lĩnh vực' : 'Đơn
										vị xử lý'}}</th>
									<th rowspan="2" colspan="3" class="text-center middle text-uppercase">Số PAKN được tiếp nhận</th>
									<th rowspan="2" colspan="6" class="text-center middle text-uppercase">Kết quả xử lý PAKN</th>
									<th rowspan="3" colspan="4" class="text-center middle text-uppercase">Đánh giá</th>
									<th rowspan="6" colspan="1" class="text-center middle text-uppercase" style="width: 100px;">Số lượng
										PAKN Đăng tải công khai kết quả xử lý</th>
								</tr>
								<tr></tr>
								<tr>
									<th rowspan="5" colspan="1" class="text-center middle" style="width: 60px;">Tổng số</th>
									<th rowspan="1" colspan="2" class="text-center middle">Chia ra</th>
									<th rowspan="1" colspan="3" class="text-center middle">Đã xử lý</th>
									<th rowspan="1" colspan="3" class="text-center middle">Đang xử lý</th>
								</tr>
								<tr>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">PAKN về dịch vụ công</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">PAKN về KTXH</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Tổng số</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Đúng hạn</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Quá hạn</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Tổng số</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Đúng hạn</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Quá hạn</th>

									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Tổng số</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Rất Hài lòng</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Hài lòng</th>
									<th rowspan="2" colspan="1" class="text-center middle" style="width: 60px;">Không hài lòng</th>
								</tr>

							</ng-template>
							<ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
								<tr>
									<td class="text-center">{{item.stt}}</td>
									<td>
										<p class="text-2line mb-0">{{item.name}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewDetail(item.id,null)">{{item.received | number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewDetail(item.id,0)">{{item.recommendationPublicService |
											number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewDetail(item.id,1)">{{item.recommendationSocioeconomic |
											number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewResultDetail(item.id,10,null)">{{item.processedTotal |
											number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewResultDetail(item.id,10,1)">{{item.processedOnTime |
											number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewResultDetail(item.id,10,0)">{{item.processedOutOfDate |
											number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewResultDetail(item.id,4,null)">{{item.processTotal | number}}
										</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewResultDetail(item.id,4,1)">{{item.processOnTime | number}}
										</p>
									</td>
									<td>
										<p class="mb-0 text-right" (click)="viewResultDetail(item.id,4,0)">{{item.processOutOfDate |
											number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right">{{item.evaluate | number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right">{{item.like | number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right">{{item.accept | number}}</p>
									</td>
									<td>
										<p class="mb-0 text-right">{{item.dislike | number}}</p>
									</td>

									<td>
										<p class="mb-0 text-right">{{item.publicQuantity | number}}</p>
									</td>
								</tr>
							</ng-template>
							<ng-template pTemplate="emptymessage">
								<tr>
									<td class="text-center" colspan="20">Không có dữ liệu</td>
								</tr>
							</ng-template>
						</p-table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>