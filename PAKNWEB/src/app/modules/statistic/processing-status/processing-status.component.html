<div class="content-body">
<div class="container-fluid p-0">
	<div class="row">
		<div class="col-lg-12">
			<ol class="breadcrumb title-module px-0 bg-transparent mb-0">
				<li class="breadcrumb-item"><a class="font-weight-bold uppercase"> Tình trạng xử lý phản ánh, kiến nghị về KT-XH tỉnh Khánh Hòa</a></li>
			</ol>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12">
			<div class="card mb-0 shadow-none">
				<div class="row p-3" style="background-color: #f6f6f6;">
					<div class="col col-sm-2 form-group mb-0">
						<div class="dropdown bootstrap-select form-control form-control-sm">
							<ng-select  notFoundText="Không có dữ liệu" [clearable]="false" placeholder="Năm" class="form-control" [items]="listYear"
								 bindLabel="text" bindValue="value" [(ngModel)]="year" [closeOnSelect]="true"
								 (change)="changeYear()">
							 </ng-select>
						 </div>
					</div>
					<div class="col col-sm-2 form-group mb-0">
						<div class="dropdown bootstrap-select form-control form-control-sm">
							<ng-select  notFoundText="Không có dữ liệu" class="form-control" placeholder="Quý" [clearable]="true" [items]="listQuarter"
								 bindLabel="text" bindValue="value" [(ngModel)]="quarter" [closeOnSelect]="true"
								 (change)="changeQuarter()">
							 </ng-select>
						 </div>
					</div>
					<div class="col col-sm-2 form-group mb-0">
						<input id="from_date" class="form-control-sm form-control" type="text" bsDatepicker #nv="bsDatepicker"
							[(ngModel)]="fromDate" [maxDate]="maxDateValue"
							[bsConfig]="{
								adaptivePosition: true,
								dateInputFormat: 'DD/MM/YYYY',
								containerClass: 'theme-dark-blue'
							}" datetime="DD/MM/YYYY" placeholder="Từ ngày" (bsValueChange)="fromDateValueChange($event)" />
						<span class="input-group-addon" (click)="nv.toggle()" [attr.aria-expanded]="nv.isOpen">
							<i class="fal fa-calendar"></i>
						</span>
					</div>
					<div class="col col-sm-2 form-group mb-0">
						<input id="to_date" class="form-control-sm form-control" type="text" bsDatepicker #nvto="bsDatepicker"
							[(ngModel)]="toDate" [maxDate]="maxDateValue"
							[bsConfig]="{
								adaptivePosition: true,
								dateInputFormat: 'DD/MM/YYYY',
								containerClass: 'theme-dark-blue'
							}" datetime="DD/MM/YYYY" placeholder="Đến ngày" (bsValueChange)="toDateValueChange($event)" />
						<span class="input-group-addon" (click)="nvto.toggle()" [attr.aria-expanded]="nvto.isOpen">
							<i class="fal fa-calendar"></i>
						</span>
					</div>
				</div>
				<div class="table-responsive">
					<p-table #table [value]="listData" [lazy]="true" (onLazyLoad)="onPageChange($event)" [paginator]="true" [showCurrentPageReport]="true"
					currentPageReportTemplate="Tổng số {{totalRecords}}" [rows]="pageSize" [totalRecords]="totalRecords" [responsive]="true" autoLayout="true"
					tableStyleClass="table table-sd table-responsive-md table-striped mb-0">
						<ng-template pTemplate="header" class="bg-thead">
							<tr>
								<th style="width: 50px" class="text-center middle">
									<p class="mb-0">
										<strong>STT</strong>
									</p>
								</th>
								<th class="text-center middle">
									<p class="mb-0">
										<strong>Nội dung phản ánh</strong>
									</p>
								</th>
								<th style="width: 150px" class="text-center middle">
									<p class="mb-0">
										<strong>Lĩnh vực</strong>
									</p>
								</th>
								<th style="width: 150px" class="text-center middle">
									<p class="mb-0">
										<strong>Số điện thoại phản ánh</strong>
									</p>
								</th>
								<th style="max-width: 180px; width: 160px" class="text-center middle">
									<p class="mb-0">
										<strong>Đơn vị tiếp nhận</strong>
									</p>
								</th>
								<th style="width: 130px" class="text-center middle">
									<p class="mb-0">
										<strong>Cơ quan xử lý</strong>
									</p>
								</th>
								<th style="width: 130px" class="text-center middle">
									<p class="mb-0">
										<strong>Cán bộ xử lý</strong>
									</p>
								</th>
								<th style="width: 100px" class="text-center middle">
									<p class="mb-0">
										<strong>Ngày tiếp nhận</strong>
									</p>
								</th>
								<th style="width: 100px" class="text-center middle">
									<p class="mb-0">
										<strong>Ngày trả lời</strong>
									</p>
								</th>
								<th style="width: 110px" class="text-center middle">
									<p class="mb-0">
										<strong>Trạng thái xử lý</strong>
									</p>
								</th>
								
							</tr>
						</ng-template>
						<ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
							<tr>
								<td class="text-center">{{rowIndex + 1}}</td>
								<td>
									<p class="text-3line mb-0 cursor">
										<a routerLink="/quan-tri/kien-nghi/chi-tiet/{{item.id}}">{{item.content}}</a>
									</p>
								</td>
								<td>
									<p class="mb-0 text-3line">{{item.fieldName}}</p>
								</td>
								<td>
									<p class="mb-0">{{item.phone}}</p>
								</td>
								<td>
									<p class="mb-0 text-3line">{{item.unitName}}</p>
								</td>
								<td>
									<p class="mb-0">{{item.unitProcessName}}</p>
								</td>
								<td>
									<p class="mb-0">{{item.userProcessName}}</p>
								</td>
								<td>
									<p class="mb-0">{{item.receivedDate | date : 'dd/MM/yyyy'}}</p>
								</td>
								
								<td>
									<p class="mb-0">{{item.conclusionDate | date : 'dd/MM/yyyy'}}</p>
								</td>
								<td>
									<span *ngIf="item.status == 1">Đang soạn thảo</span>
									<span *ngIf="item.status == 2">Chờ xử lý</span>
									<span *ngIf="item.status == 3">Từ chối tiếp nhận</span>
									<span *ngIf="item.status == 4">Đã tiếp nhận</span>
									<span *ngIf="item.status == 5">Chờ giải quyết</span>
									<span *ngIf="item.status == 6">Từ chối giải quyết</span>
									<span *ngIf="item.status == 7">Đang giải quyết</span>
									<span *ngIf="item.status == 8">Chờ phê duyệt</span>
									<span *ngIf="item.status == 9">Từ chối phê duyệt</span>
									<span *ngIf="item.status == 10">Đã giải quyết</span>
									<span *ngIf="item.status == 11">Đã chuyển</span>
								</td>
							</tr>
						</ng-template>
						<ng-template pTemplate="emptymessage">
							<tr>
								<td class="text-center" colspan="10">Không có dữ liệu</td>
							</tr>
						</ng-template>
					</p-table>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
